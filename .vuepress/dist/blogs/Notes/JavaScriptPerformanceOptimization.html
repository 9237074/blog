<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>内存管理 | Cream 在努力💪</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="让输出倒逼输入">
    
    <link rel="preload" href="/assets/css/0.styles.101e93c3.css" as="style"><link rel="preload" href="/assets/js/app.5feb7150.js" as="script"><link rel="preload" href="/assets/js/2.e09c9691.js" as="script"><link rel="preload" href="/assets/js/20.cfa72bd7.js" as="script"><link rel="prefetch" href="/assets/js/10.e0fe64a7.js"><link rel="prefetch" href="/assets/js/11.94d4215c.js"><link rel="prefetch" href="/assets/js/12.ad969433.js"><link rel="prefetch" href="/assets/js/13.9dc71e95.js"><link rel="prefetch" href="/assets/js/14.3742a2d7.js"><link rel="prefetch" href="/assets/js/15.b12d67be.js"><link rel="prefetch" href="/assets/js/16.6e826507.js"><link rel="prefetch" href="/assets/js/17.0f0e115d.js"><link rel="prefetch" href="/assets/js/18.656e7f80.js"><link rel="prefetch" href="/assets/js/19.123b33f1.js"><link rel="prefetch" href="/assets/js/21.f77fc7ac.js"><link rel="prefetch" href="/assets/js/22.320aca1e.js"><link rel="prefetch" href="/assets/js/23.26e04b95.js"><link rel="prefetch" href="/assets/js/24.d686d1ac.js"><link rel="prefetch" href="/assets/js/25.ed44bb6c.js"><link rel="prefetch" href="/assets/js/26.1ce7480c.js"><link rel="prefetch" href="/assets/js/3.ec48a77e.js"><link rel="prefetch" href="/assets/js/4.d37862ef.js"><link rel="prefetch" href="/assets/js/5.9fe721ce.js"><link rel="prefetch" href="/assets/js/6.73c063ed.js"><link rel="prefetch" href="/assets/js/7.bff18d4d.js"><link rel="prefetch" href="/assets/js/8.d6e5fff6.js"><link rel="prefetch" href="/assets/js/9.7e4cec92.js">
    <link rel="stylesheet" href="/assets/css/0.styles.101e93c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Cream 在努力💪</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/vue/001.html" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/react/001.html" class="nav-link">
  react
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/ComputerBasics/" class="nav-link">
  计算机基础
</a></div><div class="nav-item"><a href="/blogs/Notes/webpack/" class="nav-link">
  webpack
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据结构与算法" class="mobile-dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/Algorithm/sort/" class="nav-link">
  排序
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/English/" class="nav-link">
  英语
</a></div><div class="nav-item"><a href="/blogs/Blog/" class="nav-link">
  杂文
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/vue/001.html" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/react/001.html" class="nav-link">
  react
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/ComputerBasics/" class="nav-link">
  计算机基础
</a></div><div class="nav-item"><a href="/blogs/Notes/webpack/" class="nav-link">
  webpack
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据结构与算法" class="mobile-dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/Algorithm/sort/" class="nav-link">
  排序
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/English/" class="nav-link">
  英语
</a></div><div class="nav-item"><a href="/blogs/Blog/" class="nav-link">
  杂文
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="内存管理"><a href="#内存管理" class="header-anchor">#</a> 内存管理</h3> <ul><li>内存：由可读写单元组成，表示一片可操作空间</li> <li>管理：人为的去操作一片空间的申请、使用和释放</li> <li>内存管理：开发者主动申请空间、使用空间、释放空间</li> <li>管理流程：申请-使用-释放</li></ul> <h3 id="javascript中的内存管理"><a href="#javascript中的内存管理" class="header-anchor">#</a> JavaScript中的内存管理</h3> <ul><li>申请内存空间</li> <li>使用内存空间</li> <li>释放内存空间</li></ul> <h3 id="javascript中的垃圾"><a href="#javascript中的垃圾" class="header-anchor">#</a> JavaScript中的垃圾</h3> <ul><li>JavaScript中内存管理是自动的</li> <li>对象不再被引用时是垃圾</li> <li>对象不能从根上访问到时是垃圾</li></ul> <h3 id="javascript中的可达对象"><a href="#javascript中的可达对象" class="header-anchor">#</a> JavaScript中的可达对象</h3> <ul><li>可以访问到的对象就是可达对象（引用、作用域）</li> <li>可达的标准就是从根出发是否能够被找到</li> <li>JavaScript中的根就可以理解为是全局变量对象</li></ul> <h3 id="gc算法是什么"><a href="#gc算法是什么" class="header-anchor">#</a> GC算法是什么</h3> <ul><li>GC是一种机制，垃圾回收器完成具体的工作</li> <li>工作的内容就是查找垃圾释放空间、回收空间</li> <li>算法就是工作时查找和回收所遵循的规则</li></ul> <h3 id="常见gc算法"><a href="#常见gc算法" class="header-anchor">#</a> 常见GC算法</h3> <ul><li>引用计数</li> <li>标记清除</li> <li>标记整理</li> <li>分代回收</li></ul> <h4 id="引用计数算法实现原理"><a href="#引用计数算法实现原理" class="header-anchor">#</a> 引用计数算法实现原理</h4> <ul><li>核心思想：设置引用数，判断当前引用数是否为0</li> <li>引用计数器</li> <li>引用关系改变是修改引用数字</li> <li>引用数字为0时立即回收</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> user1 <span class="token operator">=</span> <span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> user2 <span class="token operator">=</span> <span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> user3 <span class="token operator">=</span> <span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">}</span>

<span class="token keyword">const</span> nameList <span class="token operator">=</span> <span class="token punctuation">[</span>user1<span class="token punctuation">.</span>age<span class="token punctuation">,</span> user2<span class="token punctuation">.</span>age<span class="token punctuation">,</span> user3<span class="token punctuation">.</span>age<span class="token punctuation">,</span> <span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 全局作用域</span>
    <span class="token comment">// num1 = 1</span>
    <span class="token comment">// num2 = 2</span>

    <span class="token comment">// 局部作用域</span>
    <span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><h5 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h5> <ul><li>发现垃圾立即回收</li> <li>最大限度减少程序暂停</li></ul> <h5 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h5> <ul><li>无法回收循环引用的对象</li> <li>资源消耗大</li></ul> <h4 id="标记清除算法实现原理"><a href="#标记清除算法实现原理" class="header-anchor">#</a> 标记清除算法实现原理</h4> <ul><li>核心思想：分标记和清除二个阶段完成</li> <li>遍历所有对象找标记活动对象</li> <li>遍历所有对象清除没有标记对象</li> <li>回收相应的空间</li></ul> <h5 id="优点-2"><a href="#优点-2" class="header-anchor">#</a> 优点</h5> <ul><li>解决循环引用不能回收问题</li></ul> <h5 id="缺点-2"><a href="#缺点-2" class="header-anchor">#</a> 缺点</h5> <ul><li>空间碎片化</li></ul> <h4 id="标记整理算法实现原理"><a href="#标记整理算法实现原理" class="header-anchor">#</a> 标记整理算法实现原理</h4> <ul><li>标记整理可以看作是标记清除的增强</li> <li>标记阶段的操作和标记清除一致</li> <li>清除阶段会先执行整理，移动对象位置</li></ul> <h5 id="优点-3"><a href="#优点-3" class="header-anchor">#</a> 优点</h5> <ul><li>减少碎片化空间</li></ul> <h5 id="缺点-3"><a href="#缺点-3" class="header-anchor">#</a> 缺点</h5> <ul><li>不会立即回收垃圾对象</li></ul> <h4 id="认识v8"><a href="#认识v8" class="header-anchor">#</a> 认识V8</h4> <ul><li>V8是一款主流的JavaScript执行引擎</li> <li>V8采用即时编译</li> <li>V8内存设限</li></ul> <h4 id="v8垃圾回收策略"><a href="#v8垃圾回收策略" class="header-anchor">#</a> V8垃圾回收策略</h4> <ul><li>采用分代回收的思想</li> <li>内存分为新生代、老生代</li></ul> <h5 id="v8中常用gc算法"><a href="#v8中常用gc算法" class="header-anchor">#</a> V8中常用GC算法</h5> <ul><li>分代回收</li> <li>空间复制</li> <li>标记清除</li> <li>标记整理</li> <li>标记增量</li></ul> <h4 id="v8内存分配"><a href="#v8内存分配" class="header-anchor">#</a> V8内存分配</h4> <ul><li>V8内存空间一分为二</li> <li>小空间用于存储新生代对象（32M｜16M）</li> <li>新生代指的是存活时间较短的对象</li></ul> <h5 id="新生代对象回收实现"><a href="#新生代对象回收实现" class="header-anchor">#</a> 新生代对象回收实现</h5> <ul><li>回收过程采用复制算法 + 标记整理</li> <li>新生代内存区分为二个等大小空间</li> <li>使用空间为From，空闲空间为To</li> <li>活动对象存储与From空间</li> <li>标记整理后将活动对象拷贝至To</li> <li>From与To交换空间完成释放</li></ul> <h6 id="回收细节说明"><a href="#回收细节说明" class="header-anchor">#</a> 回收细节说明</h6> <ul><li>拷贝过程中可能出现晋升</li> <li>晋升就是将新生代对象移动至老生代</li> <li>一轮GC还存活的新生代需要晋升</li> <li>To空间的使用率超过25%</li></ul> <h5 id="老年代对象说明"><a href="#老年代对象说明" class="header-anchor">#</a> 老年代对象说明</h5> <ul><li>老年代对象存放在右侧老生代区域</li> <li>64位操作系统1.4G，32位擦操作系统700M</li> <li>老年代对象就是指存活时间较长的对象</li></ul> <h5 id="老年代对象回收实现"><a href="#老年代对象回收实现" class="header-anchor">#</a> 老年代对象回收实现</h5> <ul><li>主要采用标记清除、标记整理、增量标记算法</li> <li>首先使用标记清除完成垃圾空间的回收</li> <li>采用标记整理进行空间优化</li> <li>采用增量标记进行效率优化</li></ul> <h5 id="细节对比"><a href="#细节对比" class="header-anchor">#</a> 细节对比</h5> <ul><li>新生代区域垃圾回收使用空间换时间</li> <li>老生代区域垃圾回收不适合复制算法</li></ul> <h3 id="使用performance"><a href="#使用performance" class="header-anchor">#</a> 使用Performance</h3> <ul><li>GC的目的是为了实现内存空间的良性循环</li> <li>良性循环的基石是合理使用</li> <li>时刻关注才能确定是否合理</li> <li>Performance时刻监控内存</li></ul> <h4 id="performance-使用步骤"><a href="#performance-使用步骤" class="header-anchor">#</a> Performance 使用步骤</h4> <ul><li>打开浏览器输入目标地址</li> <li>进入开发人员工具面板，选择Performance</li> <li>开启录制功能，访问具体界面</li> <li>执行界面中记录的内存信息</li></ul> <h4 id="内存问题的外在表现"><a href="#内存问题的外在表现" class="header-anchor">#</a> 内存问题的外在表现</h4> <ul><li>页面出现延迟加载或经常性暂停</li> <li>页面持续性出现糟糕的性能</li> <li>页面的性能随时间延长越来越差</li></ul> <h4 id="监控内存的几种方式"><a href="#监控内存的几种方式" class="header-anchor">#</a> 监控内存的几种方式</h4></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5feb7150.js" defer></script><script src="/assets/js/2.e09c9691.js" defer></script><script src="/assets/js/20.cfa72bd7.js" defer></script>
  </body>
</html>

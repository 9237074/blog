<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack | Cream åœ¨åŠªåŠ›ğŸ’ª</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/blog/logo.png">
    <meta name="description" content="è®©è¾“å‡ºå€’é€¼è¾“å…¥">
    
    <link rel="preload" href="/blog/assets/css/0.styles.15cc3f33.css" as="style"><link rel="preload" href="/blog/assets/js/app.18798fc3.js" as="script"><link rel="preload" href="/blog/assets/js/2.fbd03bc2.js" as="script"><link rel="preload" href="/blog/assets/js/14.6640d11c.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.0a734087.js"><link rel="prefetch" href="/blog/assets/js/11.1dbe46cd.js"><link rel="prefetch" href="/blog/assets/js/12.bb1ac121.js"><link rel="prefetch" href="/blog/assets/js/13.c2699410.js"><link rel="prefetch" href="/blog/assets/js/15.75360a2c.js"><link rel="prefetch" href="/blog/assets/js/16.20e267fc.js"><link rel="prefetch" href="/blog/assets/js/17.d473070f.js"><link rel="prefetch" href="/blog/assets/js/18.435a66cd.js"><link rel="prefetch" href="/blog/assets/js/3.d3e1f837.js"><link rel="prefetch" href="/blog/assets/js/4.77dc32b7.js"><link rel="prefetch" href="/blog/assets/js/5.34cfd82a.js"><link rel="prefetch" href="/blog/assets/js/6.cc18be44.js"><link rel="prefetch" href="/blog/assets/js/7.5b60423a.js"><link rel="prefetch" href="/blog/assets/js/8.a1d16cf6.js"><link rel="prefetch" href="/blog/assets/js/9.97a4fc2f.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.15cc3f33.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Cream åœ¨åŠªåŠ›ğŸ’ª</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/FrontEnd/" class="nav-link">
  å‰ç«¯
</a></div><div class="nav-item"><a href="/blog/ComputerBasics/" class="nav-link">
  è®¡ç®—æœºåŸºç¡€
</a></div><div class="nav-item"><a href="/blog/Notes/webpack/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  webpack
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®ç»“æ„ä¸ç®—æ³•" class="dropdown-title"><span class="title">æ•°æ®ç»“æ„ä¸ç®—æ³•</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ•°æ®ç»“æ„ä¸ç®—æ³•" class="mobile-dropdown-title"><span class="title">æ•°æ®ç»“æ„ä¸ç®—æ³•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Algorithm/sort/" class="nav-link">
  æ’åº
</a></li></ul></div></div><div class="nav-item"><a href="/blog/English/" class="nav-link">
  è‹±è¯­å››çº§
</a></div><div class="nav-item"><a href="/blog/Blog/" class="nav-link">
  æ‚æ–‡
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/FrontEnd/" class="nav-link">
  å‰ç«¯
</a></div><div class="nav-item"><a href="/blog/ComputerBasics/" class="nav-link">
  è®¡ç®—æœºåŸºç¡€
</a></div><div class="nav-item"><a href="/blog/Notes/webpack/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  webpack
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®ç»“æ„ä¸ç®—æ³•" class="dropdown-title"><span class="title">æ•°æ®ç»“æ„ä¸ç®—æ³•</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ•°æ®ç»“æ„ä¸ç®—æ³•" class="mobile-dropdown-title"><span class="title">æ•°æ®ç»“æ„ä¸ç®—æ³•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Algorithm/sort/" class="nav-link">
  æ’åº
</a></li></ul></div></div><div class="nav-item"><a href="/blog/English/" class="nav-link">
  è‹±è¯­å››çº§
</a></div><div class="nav-item"><a href="/blog/Blog/" class="nav-link">
  æ‚æ–‡
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Notes/webpack/#webpacké…ç½®æ–‡ä»¶" class="sidebar-link">webpacké…ç½®æ–‡ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Notes/webpack/#webpack-å·¥ä½œæ¨¡å¼" class="sidebar-link">webpack å·¥ä½œæ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/blog/Notes/webpack/#æ¨¡å—æ‰“åŒ…" class="sidebar-link">æ¨¡å—æ‰“åŒ…</a></li><li class="sidebar-sub-header"><a href="/blog/Notes/webpack/#æ–‡ä»¶èµ„æºåŠ è½½å™¨" class="sidebar-link">æ–‡ä»¶èµ„æºåŠ è½½å™¨</a></li><li class="sidebar-sub-header"><a href="/blog/Notes/webpack/#ä»£ç æ£€æŸ¥ç±»" class="sidebar-link">ä»£ç æ£€æŸ¥ç±»</a></li><li class="sidebar-sub-header"><a href="/blog/Notes/webpack/#å¸¸ç”¨åŠ è½½å™¨åˆ†ç±»" class="sidebar-link">å¸¸ç”¨åŠ è½½å™¨åˆ†ç±»</a></li></ul></li><li><a href="/blog/Notes/webpack/#webpack-æ¨¡å—åŠ è½½æ–¹å¼" class="sidebar-link">webpack æ¨¡å—åŠ è½½æ–¹å¼</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#loaderçš„å·¥ä½œåŸç†" class="sidebar-link">Loaderçš„å·¥ä½œåŸç†</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#webpackå¸¸è§æ’ä»¶" class="sidebar-link">webpackå¸¸è§æ’ä»¶</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#å¼€å‘ä¸€ä¸ªwebpackæ’ä»¶" class="sidebar-link">å¼€å‘ä¸€ä¸ªwebpackæ’ä»¶</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#å¢å¼ºwebpackå¼€å‘ä½“éªŒ" class="sidebar-link">å¢å¼ºwebpackå¼€å‘ä½“éªŒ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#webpack-devserver" class="sidebar-link">webpack devServer</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#source-map" class="sidebar-link">Source Map</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#devtool" class="sidebar-link">devtool</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#hmr-çƒ­æ›¿æ¢" class="sidebar-link">HMR çƒ­æ›¿æ¢</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#ä¸åŒç¯å¢ƒä¸åŒé…ç½®" class="sidebar-link">ä¸åŒç¯å¢ƒä¸åŒé…ç½®</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#defineplugin" class="sidebar-link">DefinePlugin</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#tree-shaking-æœªå¼•ç”¨ä»£ç -dead-code" class="sidebar-link">Tree-shaking æœªå¼•ç”¨ä»£ç ï¼ˆdead codeï¼‰</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#tree-shaking-babel" class="sidebar-link">Tree-shaking &amp; Babel</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#sideeffects-å‰¯ä½œç”¨" class="sidebar-link">sideEffects å‰¯ä½œç”¨</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#webpack-åˆ†å‰²ä»£ç -code-splitting" class="sidebar-link">webpack åˆ†å‰²ä»£ç  Code Splitting</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#webpack-å¤šå…¥å£æ‰“åŒ…" class="sidebar-link">webpack å¤šå…¥å£æ‰“åŒ…</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#æå‰å…¬å…±æ¨¡å—" class="sidebar-link">æå‰å…¬å…±æ¨¡å—</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#åŠ¨æ€å¯¼å…¥" class="sidebar-link">åŠ¨æ€å¯¼å…¥</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#é­”æ³•æ³¨é‡Š" class="sidebar-link">é­”æ³•æ³¨é‡Š</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#minicssextractplugin-æå–cssåˆ°å•ä¸ªæ–‡ä»¶-cssæ–‡ä»¶è¶…è¿‡150kbä½¿ç”¨" class="sidebar-link">MiniCssExtractPlugin æå–CSSåˆ°å•ä¸ªæ–‡ä»¶ cssæ–‡ä»¶è¶…è¿‡150KBä½¿ç”¨</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#optimizecssassetswebpackplugin-å‹ç¼©è¾“å‡ºçš„cssæ–‡ä»¶" class="sidebar-link">OptimizeCssAssetsWebpackPlugin å‹ç¼©è¾“å‡ºçš„CSSæ–‡ä»¶</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/Notes/webpack/#è¾“å‡ºæ–‡ä»¶åhash" class="sidebar-link">è¾“å‡ºæ–‡ä»¶åHash</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h1> <div class="language- extra-class"><pre><code>webpack webpack-cli
</code></pre></div><h2 id="webpacké…ç½®æ–‡ä»¶"><a href="#webpacké…ç½®æ–‡ä»¶" class="header-anchor">#</a> webpacké…ç½®æ–‡ä»¶</h2> <div class="language- extra-class"><pre><code>webpack.config.js
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="webpack-å·¥ä½œæ¨¡å¼"><a href="#webpack-å·¥ä½œæ¨¡å¼" class="header-anchor">#</a> webpack å·¥ä½œæ¨¡å¼</h3> <ol><li>watch</li> <li>production</li> <li>none</li></ol> <h3 id="æ¨¡å—æ‰“åŒ…"><a href="#æ¨¡å—æ‰“åŒ…" class="header-anchor">#</a> æ¨¡å—æ‰“åŒ…</h3> <div class="language- extra-class"><pre><code>css-loader style-loader
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    module<span class="token operator">:</span><span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'css-loader'</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ–‡ä»¶èµ„æºåŠ è½½å™¨"><a href="#æ–‡ä»¶èµ„æºåŠ è½½å™¨" class="header-anchor">#</a> æ–‡ä»¶èµ„æºåŠ è½½å™¨</h3> <div class="language- extra-class"><pre><code>file-loader
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    output<span class="token operator">:</span><span class="token punctuation">{</span>
        publicPath<span class="token operator">:</span> <span class="token string">'dist/'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span><span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">'file-loader'</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä»£ç æ£€æŸ¥ç±»"><a href="#ä»£ç æ£€æŸ¥ç±»" class="header-anchor">#</a> ä»£ç æ£€æŸ¥ç±»</h3> <div class="language- extra-class"><pre><code>babel-loader
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    output<span class="token operator">:</span><span class="token punctuation">{</span>
        publicPath<span class="token operator">:</span> <span class="token string">'dist/'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span><span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span>
                loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
                options<span class="token operator">:</span> <span class="token punctuation">{</span>
                    presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å¸¸ç”¨åŠ è½½å™¨åˆ†ç±»"><a href="#å¸¸ç”¨åŠ è½½å™¨åˆ†ç±»" class="header-anchor">#</a> å¸¸ç”¨åŠ è½½å™¨åˆ†ç±»</h3> <ol><li>ç¼–è¯‘è½¬æ¢ç±» css-loader style-loader</li> <li>æ–‡ä»¶æ“ä½œç±» file-loader</li> <li>ä»£ç æ£€æŸ¥ç±» babel-loader</li></ol> <h2 id="webpack-æ¨¡å—åŠ è½½æ–¹å¼"><a href="#webpack-æ¨¡å—åŠ è½½æ–¹å¼" class="header-anchor">#</a> webpack æ¨¡å—åŠ è½½æ–¹å¼</h2> <ul><li>éµå¾ªESMæ ‡å‡†çš„importå£°æ˜</li> <li>éµå¾ªCommonJSæ ‡å‡†çš„requireå‡½æ•°</li> <li>éµå¾ªAMDæ ‡å‡†çš„defineå‡½æ•°å’Œrequireå‡½æ•°</li> <li>*æ ·å¼ä»£ç ä¸­çš„@importæŒ‡ä»¤å’Œurlå‡½æ•°</li> <li>*HTMLä»£ç ä¸­å›¾ç‰‡æ ‡ç­¾çš„srcå±æ€§</li></ul> <h2 id="loaderçš„å·¥ä½œåŸç†"><a href="#loaderçš„å·¥ä½œåŸç†" class="header-anchor">#</a> Loaderçš„å·¥ä½œåŸç†</h2> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">source</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'console.log(&quot;jsä»£ç &quot;)'</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="webpackå¸¸è§æ’ä»¶"><a href="#webpackå¸¸è§æ’ä»¶" class="header-anchor">#</a> webpackå¸¸è§æ’ä»¶</h2> <ul><li>clean-webpack-plugin</li> <li>html-webpack-plugin</li> <li>copy-webpack-plugin</li> <li>éœ€æ±‚ -&gt; å…³é”®è¯</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">reuqire</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">//ç”¨äºæ¸…é™¤æ—§æ–‡ä»¶</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// ç”¨äºç”Ÿæˆindex.html</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'Webpack Plugin Sample'</span><span class="token punctuation">,</span>
            meta<span class="token operator">:</span> <span class="token punctuation">{</span>
                viewport<span class="token operator">:</span> <span class="token string">'width=device-width'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// ç”¨äºç”Ÿæˆindex.html</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            filename<span class="token operator">:</span> <span class="token string">'./src/about.html'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//ç”¨äºæ‹·è´publicæ–‡ä»¶</span>
        <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å¼€å‘ä¸€ä¸ªwebpackæ’ä»¶"><a href="#å¼€å‘ä¸€ä¸ªwebpackæ’ä»¶" class="header-anchor">#</a> å¼€å‘ä¸€ä¸ªwebpackæ’ä»¶</h2> <ul><li>é’©å­ Hooks ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªåŒ…å«applyæ–¹æ³•çš„å¯¹è±¡</li> <li>é€šè¿‡åœ¨ç”Ÿå‘½å‘¨æœŸä¸­çš„é’©å­ä¸­æŒ‚åœ¨å‡½æ•°å®ç°æ‹“å±•</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token punctuation">{</span>
    <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">compilation</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">//compilation =&gt; å¯ä»¥ç†è§£ä¸ºä¸Šä¸‹æ–‡</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> name <span class="token keyword">in</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">const</span> contents <span class="token operator">=</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">const</span> withoutComments <span class="token operator">=</span> contents<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/\*\*+\*\/</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
                    compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
                         <span class="token function-variable function">source</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> withoutComments<span class="token punctuation">,</span>
                         <span class="token function-variable function">size</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> withoutComment<span class="token punctuation">.</span>length
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å¢å¼ºwebpackå¼€å‘ä½“éªŒ"><a href="#å¢å¼ºwebpackå¼€å‘ä½“éªŒ" class="header-anchor">#</a> å¢å¼ºwebpackå¼€å‘ä½“éªŒ</h2> <ul><li>è‡ªåŠ¨ç¼–è¯‘ watchå·¥ä½œæ¨¡å¼
webpack --watch</li> <li>è‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨
BrowserSync</li></ul> <h2 id="webpack-devserver"><a href="#webpack-devserver" class="header-anchor">#</a> webpack devServer</h2> <div class="language- extra-class"><pre><code>webpack-dev-server --open
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    devServer<span class="token operator">:</span><span class="token punctuation">{</span>
        contentBase<span class="token operator">:</span> <span class="token string">'./public'</span><span class="token punctuation">,</span>
        proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// http://localhost:8080/api/users -&gt; https://api.github.com/api/users</span>
                target<span class="token operator">:</span> <span class="token string">'https://api.github.com'</span><span class="token punctuation">,</span>
                <span class="token comment">// http://localhost:8080/api/users -&gt; https://api.github.com/users</span>
                pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token comment">// ä¸èƒ½ä½¿ç”¨localhost:8080 ä½œä¸ºè¯·æ±‚GitHubçš„ä¸»æœºå</span>
                changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="source-map"><a href="#source-map" class="header-anchor">#</a> Source Map</h2> <ul><li>æ–‡ä»¶åç¼€ .map</li> <li>æ„å»ºåä»£ç æœ€åä¸€è¡Œæ³¨é‡Š //# sourceMappingURL=jquery-3.4.1.min.map</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    devtool<span class="token operator">:</span> <span class="token string">'source-map'</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="devtool"><a href="#devtool" class="header-anchor">#</a> devtool</h2> <ul><li>å¼€å‘ç¯å¢ƒä¸‹ cheap-module-eval-source-map</li> <li>ç”Ÿäº§ç¯å¢ƒ none ï½œ nosources-source-map</li></ul> <h2 id="hmr-çƒ­æ›¿æ¢"><a href="#hmr-çƒ­æ›¿æ¢" class="header-anchor">#</a> HMR çƒ­æ›¿æ¢</h2> <div class="language- extra-class"><pre><code>webpack-dev-server --hot
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>'webpack<span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        hot<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugin<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>HMR apis</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./editor'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'editor æ›´æ–°äº†'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ä¸åŒç¯å¢ƒä¸åŒé…ç½®"><a href="#ä¸åŒç¯å¢ƒä¸åŒé…ç½®" class="header-anchor">#</a> ä¸åŒç¯å¢ƒä¸åŒé…ç½®</h2> <ol><li>é…ç½®æ–‡ä»¶æ ¹æ®ç¯å¢ƒä¸åŒå¯¼å‡ºä¸åŒé…ç½®<div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>env <span class="token operator">===</span> 'production<span class="token punctuation">)</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>ä¸€ä¸ªç¯å¢ƒå¯¹åº”ä¸€ä¸ªé…ç½®æ–‡ä»¶
<ul><li>webpack.common.js</li> <li>webpack.dev.js</li> <li>webpack.prod.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    mode<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    plugin<span class="token operator">:</span> <span class="token punctuation">[</span>

    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <h2 id="defineplugin"><a href="#defineplugin" class="header-anchor">#</a> DefinePlugin</h2> <ul><li>ä¸ºä»£ç æ³¨å…¥å…¨å±€æˆå‘˜ process.env.NODE_ENV</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token constant">API_BASE_URL</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'https://api.example.com'</span><span class="token punctuation">)</span> <span class="token comment">// jsä»£ç ç‰‡æ®µ</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="tree-shaking-æœªå¼•ç”¨ä»£ç -dead-code"><a href="#tree-shaking-æœªå¼•ç”¨ä»£ç -dead-code" class="header-anchor">#</a> Tree-shaking æœªå¼•ç”¨ä»£ç ï¼ˆdead codeï¼‰</h2> <ul><li>å¿…é¡»æ˜¯ES Module</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// è´Ÿè´£æ ‡è®° ã€Œæ¯æ ‘å¶ã€</span>
        usedExports<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// è´Ÿè´£ã€Œæ‘‡æ‰ã€å®ƒä»¬</span>
        minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">//åˆå¹¶æ¨¡å—å‡½æ•° Scope Hoisting</span>
        concatenateModules<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="tree-shaking-babel"><a href="#tree-shaking-babel" class="header-anchor">#</a> Tree-shaking &amp; Babel</h2> <ul><li>Babelå¯èƒ½æŠŠES Module -&gt; CommonJS å¯¼è‡´ä¸ç”Ÿæ•ˆ</li></ul> <h2 id="sideeffects-å‰¯ä½œç”¨"><a href="#sideeffects-å‰¯ä½œç”¨" class="header-anchor">#</a> sideEffects å‰¯ä½œç”¨</h2> <ul><li>ä¸€èˆ¬ç”¨äºnpmåŒ…æ ‡è®°æ˜¯å¦æœ‰å‰¯ä½œç”¨</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
        sideEffects<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// package.json</span>
sideEffects<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="webpack-åˆ†å‰²ä»£ç -code-splitting"><a href="#webpack-åˆ†å‰²ä»£ç -code-splitting" class="header-anchor">#</a> webpack åˆ†å‰²ä»£ç  Code Splitting</h2> <ul><li>åˆ†åŒ…ï¼ŒæŒ‰éœ€åŠ è½½</li></ul> <h2 id="webpack-å¤šå…¥å£æ‰“åŒ…"><a href="#webpack-å¤šå…¥å£æ‰“åŒ…" class="header-anchor">#</a> webpack å¤šå…¥å£æ‰“åŒ…</h2> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    enrty<span class="token operator">:</span> <span class="token punctuation">{</span>
        index<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
        album<span class="token operator">:</span> <span class="token string">'./src/album.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span><span class="token punctuation">{</span>
        filename<span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="æå‰å…¬å…±æ¨¡å—"><a href="#æå‰å…¬å…±æ¨¡å—" class="header-anchor">#</a> æå‰å…¬å…±æ¨¡å—</h2> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
        splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
            chunks<span class="token operator">:</span> <span class="token string">'all'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="åŠ¨æ€å¯¼å…¥"><a href="#åŠ¨æ€å¯¼å…¥" class="header-anchor">#</a> åŠ¨æ€å¯¼å…¥</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="é­”æ³•æ³¨é‡Š"><a href="#é­”æ³•æ³¨é‡Š" class="header-anchor">#</a> é­”æ³•æ³¨é‡Š</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* webpackChunkName: 'pots' */</span>
</code></pre></div><h2 id="minicssextractplugin-æå–cssåˆ°å•ä¸ªæ–‡ä»¶-cssæ–‡ä»¶è¶…è¿‡150kbä½¿ç”¨"><a href="#minicssextractplugin-æå–cssåˆ°å•ä¸ªæ–‡ä»¶-cssæ–‡ä»¶è¶…è¿‡150kbä½¿ç”¨" class="header-anchor">#</a> MiniCssExtractPlugin æå–CSSåˆ°å•ä¸ªæ–‡ä»¶ cssæ–‡ä»¶è¶…è¿‡150KBä½¿ç”¨</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="optimizecssassetswebpackplugin-å‹ç¼©è¾“å‡ºçš„cssæ–‡ä»¶"><a href="#optimizecssassetswebpackplugin-å‹ç¼©è¾“å‡ºçš„cssæ–‡ä»¶" class="header-anchor">#</a> OptimizeCssAssetsWebpackPlugin å‹ç¼©è¾“å‡ºçš„CSSæ–‡ä»¶</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">OptimizeCssAssetsWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="è¾“å‡ºæ–‡ä»¶åhash"><a href="#è¾“å‡ºæ–‡ä»¶åhash" class="header-anchor">#</a> è¾“å‡ºæ–‡ä»¶åHash</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
 filename<span class="token operator">:</span> <span class="token string">'[name]-[hash:8].bundle.js'</span><span class="token punctuation">,</span>
 filename<span class="token operator">:</span> <span class="token string">'[name]-[hash].bundle.js'</span><span class="token punctuation">,</span>
 filename<span class="token operator">:</span> <span class="token string">'[name]-[chunkhash].bundle.js'</span><span class="token punctuation">,</span>
 filename<span class="token operator">:</span> <span class="token string">'[name]-[contenthash].bundle.js'</span>
<span class="token punctuation">}</span>


</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.18798fc3.js" defer></script><script src="/blog/assets/js/2.fbd03bc2.js" defer></script><script src="/blog/assets/js/14.6640d11c.js" defer></script>
  </body>
</html>
